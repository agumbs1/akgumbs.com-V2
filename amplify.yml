version: 1

frontend:
  phases:
    preBuild:
      - name: Install Python 3.12.7
        uses: actions/setup-python@v5
        with:
          python-version: 3.12.7
          cache: 'pip'
      - name: Install dependencies
        run: pip install -r scripts/requirements.txt
      - name: Download artifacts folder
        uses: actions/download-artifact@v4
        with:
          name: artifacts
          path: artifacts/**
      - name: Run evaluation script
        run: python3 scripts/evaluate.py

      - name: Make predictions for todays games
        run: python3 scripts/update.py
      - name: Upload artifacts folder
        uses: actions/upload-artifact@v4
        with:
          name: artifacts
          path: artifacts/**
    build:
      commands:
        - nvm install 18
        - npm install
        - npm run build
        - echo "Building hoops app..."
  artifacts:
    baseDirectory: /artifacts
    files:
      - '**/*'
  cache:
    paths:
      - '.venv/**/*'
      - 'node_modules/**/*'
      - 'requirements.txt'